{% extends "base.html" %}
{% block title %}Document Verification - Admin{% endblock %}
{% block content %}
<div class="container">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
        <h1 style="font-size: 2.5rem; font-weight: 700;">
            <i class="fas fa-file-alt"></i> Document Verification
        </h1>
        <a href="{{ url_for('web.admin_dashboard') }}" class="btn btn-outline">
            <i class="fas fa-arrow-left"></i> Back to Dashboard
        </a>
    </div>
    
    {% if documents %}
    <div class="grid grid-1">
        {% for doc in documents %}
        <div class="card">
            <div class="card-header" style="display: flex; justify-content: space-between; align-items: center;">
                <div>
                    <h3 class="card-title">{{ doc.document_type.value|title }}</h3>
                    <p style="margin: 0; color: var(--gray-600); font-size: 0.875rem;">
                        Uploaded by: {{ doc.user.email }}
                    </p>
                </div>
                <span class="badge-status badge-{{ doc.status.value if doc.status else '' }}">{{ doc.status.value|upper if doc.status else '' }}</span>
            </div>
            <div class="card-body">
                <div class="grid grid-2" style="gap: 2rem; margin-bottom: 1.5rem;">
                    <div>
                        <label style="font-weight: 600; color: var(--gray-600); display: block; margin-bottom: 0.5rem;">User</label>
                        <p>{{ doc.user.full_name or doc.user.email }}</p>
                    </div>
                    <div>
                        <label style="font-weight: 600; color: var(--gray-600); display: block; margin-bottom: 0.5rem;">Uploaded</label>
                        <p>{{ doc.uploaded_at.strftime('%b %d, %Y at %I:%M %p') }}</p>
                    </div>
                    <div>
                        <label style="font-weight: 600; color: var(--gray-600); display: block; margin-bottom: 0.5rem;">Document Type</label>
                        <p>{{ doc.document_type.value|title }}</p>
                    </div>
                    <div>
                        <label style="font-weight: 600; color: var(--gray-600); display: block; margin-bottom: 0.5rem;">File</label>
                        <p><a href="{{ doc.file_path }}" target="_blank" class="btn btn-sm btn-outline">
                            <i class="fas fa-download"></i> View Document
                        </a></p>
                    </div>
                </div>
                
                <div style="display: flex; gap: 1rem;">
                    <form method="POST" action="{{ url_for('web.approve_document', document_id=doc.id) }}" style="flex: 1;">
                        <button type="submit" class="btn btn-success" style="width: 100%;" onclick="return confirm('Approve this document?')">
                            <i class="fas fa-check"></i> Approve
                        </button>
                    </form>
                    <form method="POST" action="{{ url_for('web.reject_document', document_id=doc.id) }}" style="flex: 1;">
                        <input type="hidden" name="reason" value="Document did not meet verification requirements">
                        <button type="submit" class="btn btn-danger" style="width: 100%;" onclick="return confirm('Reject this document?')">
                            <i class="fas fa-times"></i> Reject
                        </button>
                    </form>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <div class="card">
        <div class="card-body" style="text-align: center; padding: 3rem;">
            <i class="fas fa-check-circle" style="font-size: 4rem; color: #10b981; margin-bottom: 1rem;"></i>
            <h3 style="margin-bottom: 0.5rem;">All Caught Up!</h3>
            <p style="color: var(--gray-600);">No pending documents to verify</p>
        </div>
    </div>
    {% endif %}
</div>
{% endblock %}
